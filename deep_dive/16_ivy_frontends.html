<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Ivy Frontends &mdash; Ivy 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="icon" type="image/png" href="https://github.com/unifyai/unifyai.github.io/blob/master/img/externally_linked/ivy_logo_only.png?raw=true">
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Ivy Frontend Tests" href="17_ivy_frontends_tests.html" />
    <link rel="prev" title="Ivy Tests" href="15_ivy_tests.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Ivy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Overview</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../background.html">Background</a></li>
<li class="toctree-l1"><a class="reference internal" href="../design.html">Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../roadmap.html">Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing.html">Contributing</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../deep_dive.html">Deep Dive</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="0_navigating_the_code.html">Navigating the Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="1_function_types.html">Function Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_superset_behaviour.html">Superset Behaviour</a></li>
<li class="toctree-l2"><a class="reference internal" href="3_backend_setting.html">Backend Setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_arrays.html">Arrays</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_containers.html">Containers</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_data_types.html">Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="7_devices.html">Devices</a></li>
<li class="toctree-l2"><a class="reference internal" href="8_inplace_updates.html">Inplace Updates</a></li>
<li class="toctree-l2"><a class="reference internal" href="9_function_wrapping.html">Function Wrapping</a></li>
<li class="toctree-l2"><a class="reference internal" href="10_formatting.html">Formatting</a></li>
<li class="toctree-l2"><a class="reference internal" href="11_function_arguments.html">Function Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="12_docstrings.html">Docstrings</a></li>
<li class="toctree-l2"><a class="reference internal" href="13_docstring_examples.html">Docstring Examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="14_array_api_tests.html">Array API Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="15_ivy_tests.html">Ivy Tests</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Ivy Frontends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-basics">The Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="#unused-arguments">Unused Arguments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compositions">Compositions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#missing-ivy-functions">Missing Ivy Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#temporary-compositions">Temporary Compositions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-data-types-and-devices">Supported Data Types and Devices</a></li>
<li class="toctree-l3"><a class="reference internal" href="#classes-and-instance-methods">Classes and Instance Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="#framework-specific-argument-types">Framework-Specific Argument Types</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="17_ivy_frontends_tests.html">Ivy Frontend Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="18_exception_handling.html">Exception Handling</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Functions</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/activations.html">Activations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/compilation.html">Compilation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/constants.html">Constants</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/creation.html">Creation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/data_type.html">Data type</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/device.html">Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/elementwise.html">Elementwise</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/extensions.html">Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/general.html">General</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/gradients.html">Gradients</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/layers.html">Layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/linear_algebra.html">Linear algebra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/losses.html">Losses</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/manipulation.html">Manipulation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/meta.html">Meta</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/nest.html">Nest</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/norms.html">Norms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/random.html">Random</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/searching.html">Searching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/set.html">Set</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/sorting.html">Sorting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/statistical.html">Statistical</a></li>
<li class="toctree-l1"><a class="reference internal" href="../functional/ivy/utility.html">Utility</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../data_classes/container.html">Container</a></li>
<li class="toctree-l1"><a class="reference internal" href="../data_classes/array.html">Array</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Framework Classes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../stateful/initializers.html">Initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/converters.html">Converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/optimizers.html">Optimizers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/module.html">Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/layers.html">Layers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/norms.html">Norms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/activations.html">Activations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stateful/sequential.html">Sequential</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ivy"">Ivy</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../mech"">Ivy mech</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../vision"">Ivy vision</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../robot"">Ivy robot</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../gym"">Ivy gym</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../memory"">Ivy memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../builder"">Ivy builder</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../models"">Ivy models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../ecosystem"">Ivy ecosystem</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Ivy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../contributing.html">Contributing</a> &raquo;</li>
          <li><a href="../deep_dive.html">Deep Dive</a> &raquo;</li>
      <li>Ivy Frontends</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/deep_dive/16_ivy_frontends.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="ivy-frontends">
<h1>Ivy Frontends<a class="headerlink" href="#ivy-frontends" title="Permalink to this heading"></a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading"></a></h2>
<p>On top of the Ivy functional API and backend functional APIs, Ivy has another set of
framework-specific frontend functional APIs, which play an important role in code
transpilations, as explained <a class="reference external" href="https://lets-unify.ai/ivy/design/ivy_as_a_transpiler.html">here</a>.</p>
<p>Let’s start with some examples to have a better idea on Ivy Frontends!</p>
</section>
<section id="the-basics">
<h2>The Basics<a class="headerlink" href="#the-basics" title="Permalink to this heading"></a></h2>
<p><strong>NOTE:</strong> Type hints, docstrings and examples are not required when working on
frontend functions.</p>
<p>There will be some implicit discussion of the locations of frontend functions in these examples, however an explicit
explanation of how to place a frontend function can be found in a sub-section of the Frontend APIs <a href="#id4"><span class="problematic" id="id5">`open_task`_</span></a>.</p>
<p><strong>Jax</strong></p>
<p>JAX has two distinct groups of functions, those in the <code class="code docutils literal notranslate"><span class="pre">jax.lax</span></code> namespace and
those in the <code class="code docutils literal notranslate"><span class="pre">jax.numpy</span></code> namespace. The former set of functions map very closely
to the API for the Accelerated Linear Algebra (<a class="reference external" href="https://www.tensorflow.org/xla">XLA</a>)
compiler, which is used under the hood to run high performance JAX code. The latter set
of functions map very closely to NumPy’s well known API. In general, all functions in
the <code class="code docutils literal notranslate"><span class="pre">jax.numpy</span></code> namespace are themselves implemented as a composition of the
lower-level functions in the <code class="code docutils literal notranslate"><span class="pre">jax.lax</span></code> namespace.</p>
<p>When transpiling between frameworks, the first step is to compile the computation graph
into low level python functions for the source framework using Ivy’s graph
compiler, before then replacing these nodes with the associated functions in Ivy’s
frontend API. Given that all jax code can be decomposed into <code class="code docutils literal notranslate"><span class="pre">jax.lax</span></code>
function calls, when transpiling <code class="code docutils literal notranslate"><span class="pre">jax</span></code> code it should always be possible to
express the computation graph as a composition of only <code class="code docutils literal notranslate"><span class="pre">jax.lax</span></code> functions.
Therefore, arguably these are the <em>only</em> functions we should need to implement in the
JAX frontend. However, in general we wish to be able to compile a graph in the backend
framework with varying levels of dynamicism. A graph of only <code class="code docutils literal notranslate"><span class="pre">jax.lax</span></code> functions
chained together in general is more <em>static</em> and less <em>dynamic</em> than a graph which
chains <code class="code docutils literal notranslate"><span class="pre">jax.numpy</span></code> functions together. We wish to enable varying extents of
dynamicism when compiling a graph with our graph compiler, and therefore we also
implement the functions in the <code class="code docutils literal notranslate"><span class="pre">jax.numpy</span></code> namespace in our frontend API for JAX.</p>
<p>Thus, both <code class="code docutils literal notranslate"><span class="pre">lax</span></code> and <code class="code docutils literal notranslate"><span class="pre">numpy</span></code> modules are created in the JAX frontend API.
We start with the function <code class="code docutils literal notranslate"><span class="pre">lax.add</span></code> as an example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/jax/lax/operators.py</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">lax.add</span></code> is categorised under <code class="code docutils literal notranslate"><span class="pre">operators</span></code> as shown in the <a class="reference external" href="https://jax.readthedocs.io/en/latest/jax.lax.html">jax.lax</a>
package directory. We organize the functions using the same categorizations as the
original framework, and also mimick the importing behaviour regarding modules and
namespaces etc.</p>
<p>For the function arguments, these must be identical to the original function in
Jax. In this case, <a class="reference external" href="https://jax.readthedocs.io/en/latest/_autosummary/jax.lax.add.html">jax.lax.add</a> has two arguments,
and so we will also have the same two arguments in our Jax frontend <code class="code docutils literal notranslate"><span class="pre">lax.add</span></code>.
In this case, the function will then simply return <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code>,
which in turn will link to the backend-specific implementation <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code>
according to the framework set in the backend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/jax/lax/operators.py</span>
<span class="k">def</span> <span class="nf">tan</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Using <code class="code docutils literal notranslate"><span class="pre">lax.tan</span></code> as a second example, we can see that this is placed under
<code class="code docutils literal notranslate"><span class="pre">operators</span></code>, again in the <a class="reference external" href="https://jax.readthedocs.io/en/latest/jax.lax.html">jax.lax</a> directory.
By referring to the <a class="reference external" href="https://jax.readthedocs.io/en/latest/_autosummary/jax.lax.tan.html">jax.lax.tan</a> documentation, we can see that it has only one
argument. In the same manner as our <code class="code docutils literal notranslate"><span class="pre">add</span></code> function, we simply link its return
to <code class="code docutils literal notranslate"><span class="pre">ivy.tan</span></code>, and again the computation then depends on the backend framework.</p>
<p><strong>NumPy</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/numpy/mathematical_functions/arithmetic_operations.py</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
    <span class="n">x1</span><span class="p">,</span>
    <span class="n">x2</span><span class="p">,</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">where</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">casting</span><span class="o">=</span><span class="s2">&quot;same_kind&quot;</span><span class="p">,</span>
    <span class="n">order</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">subok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
    <span class="k">if</span> <span class="n">dtype</span><span class="p">:</span>
        <span class="n">x1</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">ivy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x1</span><span class="p">),</span> <span class="n">ivy</span><span class="o">.</span><span class="n">as_ivy_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">))</span>
        <span class="n">x2</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">ivy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x2</span><span class="p">),</span> <span class="n">ivy</span><span class="o">.</span><span class="n">as_ivy_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">))</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x1</span><span class="p">,</span> <span class="n">x2</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ivy</span><span class="o">.</span><span class="n">is_array</span><span class="p">(</span><span class="n">where</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">ret</span><span class="p">)),</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
<p>In NumPy, <code class="code docutils literal notranslate"><span class="pre">add</span></code> is categorised under <code class="code docutils literal notranslate"><span class="pre">mathematical_functions</span></code> with a
sub-category of <code class="code docutils literal notranslate"><span class="pre">arithmetic_operations</span></code> as shown in the
<a class="reference external" href="https://numpy.org/doc/stable/reference/index.html">numpy mathematical functions</a> directory.</p>
<p>The function arguments for this function are slightly more complex due to the extra
optional arguments. Additional handling code is added to recover the behaviour
according to the <a href="#id6"><span class="problematic" id="id7">`numpy.add`_</span></a> documentation. For example, if <code class="code docutils literal notranslate"><span class="pre">dtype</span></code> is specified,
the arguments will be cast to the desired type through <code class="code docutils literal notranslate"><span class="pre">ivy.astype</span></code>.
The returned result is then obtained through <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code> just like the other
examples.</p>
<p>However, the arguments <code class="code docutils literal notranslate"><span class="pre">casting</span></code>, <code class="code docutils literal notranslate"><span class="pre">order</span></code> and <code class="code docutils literal notranslate"><span class="pre">subok</span></code> are completely
unhandled here. This is for two reasons.</p>
<p>In the case of <code class="code docutils literal notranslate"><span class="pre">casting</span></code>, support will be added for this via the inclusion of a
decorator at some point in future, and so this is simply being deferred for the time
being.</p>
<p>In the case of <code class="code docutils literal notranslate"><span class="pre">order</span></code> and <code class="code docutils literal notranslate"><span class="pre">subok</span></code>, this is because the aspects which these
arguments seek to control are simply not controllable when using Ivy.
<code class="code docutils literal notranslate"><span class="pre">order</span></code> controls the low-level memory layout of the stored array.
Similarly, <code class="code docutils literal notranslate"><span class="pre">subok</span></code> controls whether or not subclasses of the <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>
should be permitted as inputs to the function.
Again, this is a very framework-specific argument. All ivy functions by default do
enable subclasses of the <code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code> to be passed, and the frontend function will
be operating with <code class="code docutils literal notranslate"><span class="pre">ivy.Array</span></code> instances rather than <code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>
instances, and so we omit this argument. Again, it has no bearing on input-output
behaviour and so this is not a problem when transpiling between frameworks.</p>
<p>See the section “Unused Arguments” below for more details.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/numpy/mathematical_functions/trigonometric_functions.py</span>
<span class="k">def</span> <span class="nf">tan</span><span class="p">(</span>
    <span class="n">x</span><span class="p">,</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">where</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">casting</span><span class="o">=</span><span class="s2">&quot;same_kind&quot;</span><span class="p">,</span>
    <span class="n">order</span><span class="o">=</span><span class="s2">&quot;k&quot;</span><span class="p">,</span>
    <span class="n">dtype</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">subok</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
    <span class="k">if</span> <span class="n">dtype</span><span class="p">:</span>
        <span class="n">x</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="n">ivy</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">ivy</span><span class="o">.</span><span class="n">as_ivy_dtype</span><span class="p">(</span><span class="n">dtype</span><span class="p">))</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ivy</span><span class="o">.</span><span class="n">is_array</span><span class="p">(</span><span class="n">where</span><span class="p">):</span>
        <span class="n">ret</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">where</span><span class="p">(</span><span class="n">where</span><span class="p">,</span> <span class="n">ret</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">default</span><span class="p">(</span><span class="n">out</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">zeros_like</span><span class="p">(</span><span class="n">ret</span><span class="p">)),</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
<p>For the second example, <code class="code docutils literal notranslate"><span class="pre">tan</span></code> has a sub-category of
<code class="code docutils literal notranslate"><span class="pre">trigonometric_functions</span></code> according to the <a class="reference external" href="https://numpy.org/doc/stable/reference/index.html">numpy mathematical functions</a>
directory. By referring to the <a class="reference external" href="https://numpy.org/doc/stable/reference/generated/numpy.tan.html">numpy.tan</a> documentation, we can see it has the same
additional arguments as the <code class="code docutils literal notranslate"><span class="pre">add</span></code> function. In the same manner as <code class="code docutils literal notranslate"><span class="pre">add</span></code>,
we handle the argument <code class="code docutils literal notranslate"><span class="pre">out</span></code>, <code class="code docutils literal notranslate"><span class="pre">where</span></code> and <code class="code docutils literal notranslate"><span class="pre">dtype</span></code>,
but we omit support for <code class="code docutils literal notranslate"><span class="pre">casting</span></code>, <code class="code docutils literal notranslate"><span class="pre">order</span></code> and <code class="code docutils literal notranslate"><span class="pre">subok</span></code>.</p>
<p><strong>TensorFlow</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/tensorflow/math.py</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="code docutils literal notranslate"><span class="pre">add</span></code> function is categorised under the <code class="code docutils literal notranslate"><span class="pre">math</span></code> folder in the TensorFlow
frontend. There are three arguments according to the <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/math/add">tf.add</a> documentation, which are
written accordingly as shown above. Just like the previous examples, the implementation
wraps <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code>, which itself defers to backend-specific functions depending on
which framework is set in Ivy’s backend.</p>
<p>The arguments <code class="code docutils literal notranslate"><span class="pre">x</span></code> and <code class="code docutils literal notranslate"><span class="pre">y</span></code> are both used in the implementation,
but the argument <code class="code docutils literal notranslate"><span class="pre">name</span></code> is not used. Similar to the omitted arguments in the NumPy
example above, the <code class="code docutils literal notranslate"><span class="pre">name</span></code> argument does not change the input-output behaviour of
the function. Rather, this argument is added purely for the purpose of operation logging
and retrieval, and also graph visualization in TensorFlow. Ivy does not support the
unique naming of individual operations, and so we omit support for this particular
argument.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/tensorflow/math.py</span>
<span class="k">def</span> <span class="nf">tan</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
<p>Likewise, <code class="code docutils literal notranslate"><span class="pre">tan</span></code> is also placed under <code class="code docutils literal notranslate"><span class="pre">math</span></code>.
By referring to the <a class="reference external" href="https://www.tensorflow.org/api_docs/python/tf/math/tan">tf.tan</a> documentation, we add the same arguments,
and simply wrap <code class="code docutils literal notranslate"><span class="pre">ivy.tan</span></code> in this case.
Again, we do not support the <code class="code docutils literal notranslate"><span class="pre">name</span></code> argument for the reasons outlined above.</p>
<p><strong>PyTorch</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/torch/pointwise_ops.py</span>
<span class="k">def</span> <span class="nf">add</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">other</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">other</span> <span class="o">*</span> <span class="n">alpha</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p>For PyTorch, <code class="code docutils literal notranslate"><span class="pre">add</span></code> is categorised under <code class="code docutils literal notranslate"><span class="pre">pointwise_ops</span></code> as is the case in
the <a class="reference external" href="https://pytorch.org/docs/stable/torch.html#math-operations">torch</a> framework.</p>
<p>In this case, the native <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.add.html#torch.add">torch.add</a> has both positional and keyword arguments,
and we therefore use the same for our PyTorch frontend <code class="code docutils literal notranslate"><span class="pre">add</span></code>.
We wrap <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code> as usual, but the arguments work slightly different in this
example. Looking at the PyTorch <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.add.html#torch.add">torch.add</a> documentation,
we can see that <code class="code docutils literal notranslate"><span class="pre">alpha</span></code> acts as a scale for the <code class="code docutils literal notranslate"><span class="pre">other</span></code> argument.
Thus, we can mimick the original behaviour by simply passing <code class="code docutils literal notranslate"><span class="pre">other</span> <span class="pre">*</span> <span class="pre">alpha</span></code>
into <code class="code docutils literal notranslate"><span class="pre">ivy.add</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/frontends/torch/pointwise_ops.py</span>
<span class="k">def</span> <span class="nf">tan</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">tan</span></code> is also placed under <code class="code docutils literal notranslate"><span class="pre">pointwise_ops</span></code> as is the case in the <a class="reference external" href="https://pytorch.org/docs/stable/torch.html#math-operations">torch</a>
framework. Looking at the <a class="reference external" href="https://pytorch.org/docs/stable/generated/torch.tan.html#torch.tan">torch.tan</a> documentation, we can mimick the same arguments,
and again simply wrap <code class="code docutils literal notranslate"><span class="pre">ivy.tan</span></code>,
also making use of the <code class="code docutils literal notranslate"><span class="pre">out</span></code> argument in this case.</p>
</section>
<section id="unused-arguments">
<h2>Unused Arguments<a class="headerlink" href="#unused-arguments" title="Permalink to this heading"></a></h2>
<p>As can be seen from the examples above, there are often cases where we do not add
support for particular arguments in the frontend function. Generally, we can omit
support for a particular argument only if: the argument <strong>does not</strong> fundamentally
affect the input-output behaviour of the function in a mathematical sense. The only
two exceptions to this rule are arguments related to either the data type or the device
on which the returned array(s) should reside. Examples of arguments which can be
omitted, on account that they do not change the mathematics of the function are
arguments which relate to:</p>
<ul class="simple">
<li><p>the layout of the array in memory, such as <code class="code docutils literal notranslate"><span class="pre">order</span></code> in
<a class="reference external" href="https://numpy.org/doc/1.23/reference/generated/numpy.add.html">numpy.add</a>.</p></li>
<li><p>the algorithm or approximations used under the hood, such as <code class="code docutils literal notranslate"><span class="pre">precision</span></code> and
<code class="code docutils literal notranslate"><span class="pre">preferred_element_type</span></code> in
<a class="reference external" href="https://github.com/google/jax/blob/1338864c1fcb661cbe4084919d50fb160a03570e/jax/_src/lax/convolution.py#L57">jax.lax.conv_general_dilated</a>.</p></li>
<li><p>the specific array class in the original framework, such as <code class="code docutils literal notranslate"><span class="pre">subok</span></code> in
<a class="reference external" href="https://numpy.org/doc/1.23/reference/generated/numpy.add.html">numpy.add</a>.</p></li>
<li><p>the labelling of functions for organizational purposes, such as <code class="code docutils literal notranslate"><span class="pre">name</span></code> in
<a class="reference external" href="https://github.com/tensorflow/tensorflow/blob/v2.10.0/tensorflow/python/ops/math_ops.py#L3926-L4004">tf.math.add</a>.</p></li>
</ul>
<p>There are likely to be many other examples of arguments which do not fundamentally
affect the input-output behaviour of the function in a mathematical sense, and so can
also be omitted from Ivy’s frontend implementation.</p>
<p>The reason we omit these arguments in Ivy is because Ivy is not designed to provide
low-level control to functions that extend beyond the pure mathematics of the function.
This is a requirement because Ivy abstracts the backend framework,
and therefore also abstracts everything below the backend framework’s functional API,
including the backend array class, the low-level language compiled to, the device etc.
Most ML frameworks do not offer per-array control of the memory layout, and control for
the finer details of the algorithmic approximations under the hood, and so we cannot
in general offer this level of control at the Ivy API level, nor the frontend API level
as a direct result. As explained above, this is not a problem, as the memory layout has
no bearing at all on the input-output behaviour of the function. In contrast, the
algorithmic approximation may have a marginal bearing on the final results in some
cases, but Ivy is only designed to unify to within a reasonable numeric approximation
in any case, and so omitting these arguments also very much fits within Ivy’s design.</p>
</section>
<section id="compositions">
<h2>Compositions<a class="headerlink" href="#compositions" title="Permalink to this heading"></a></h2>
<p>In many cases, frontend functions meet the following criteria:</p>
<ul class="simple">
<li><p>the function is unique to a particular frontend framework, and does not exist in the
other frameworks</p></li>
<li><p>the function has extra features and/or arguments on top of the most similar ivy
function that is available</p></li>
</ul>
<p>In such cases, compositions are required to replicate the function behaviour.</p>
<p><strong>Examples</strong></p>
<p>In the native TensorFlow function <code class="code docutils literal notranslate"><span class="pre">tf.cumprod()</span></code>, it supports an extra
argument - <code class="code docutils literal notranslate"><span class="pre">reverse</span></code>, which returns a flipped result if <code class="code docutils literal notranslate"><span class="pre">True</span></code>. However,
the backend <code class="code docutils literal notranslate"><span class="pre">ivy.cumprod()</span></code> does not support this argument or behaviour.</p>
<p><strong>Ivy</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># in ivy/functional/ivy/general.py</span>
<span class="k">def</span> <span class="nf">cumprod</span><span class="p">(</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">,</span> <span class="n">ivy</span><span class="o">.</span><span class="n">NativeArray</span><span class="p">],</span>
    <span class="o">/</span><span class="p">,</span>
    <span class="n">axis</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">exclusive</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">out</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ivy</span><span class="o">.</span><span class="n">Array</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">current_backend</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="o">.</span><span class="n">cumprod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">exclusive</span><span class="p">,</span> <span class="n">out</span><span class="o">=</span><span class="n">out</span><span class="p">)</span>
</pre></div>
</div>
<p>To enable this behaviour, we need to incorporate other Ivy functions which are
compositionally able to mimick the required behaviour.
For example, we can simply reverse the result by calling <code class="code docutils literal notranslate"><span class="pre">ivy.flip()</span></code> on the
result of <code class="code docutils literal notranslate"><span class="pre">ivy.cumprod()</span></code>.</p>
<p><strong>TensorFlow Frontend</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ivy/functional/frontends/tensorflow/math.py</span>
<span class="k">def</span> <span class="nf">cumprod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">exclusive</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="n">ivy</span><span class="o">.</span><span class="n">cumprod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">axis</span><span class="p">,</span> <span class="n">exclusive</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">reverse</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">flip</span><span class="p">(</span><span class="n">ret</span><span class="p">,</span> <span class="n">axis</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</pre></div>
</div>
<p>Through compositions, we can easily meet the required input-output behaviour for the
TensorFlow frontend function.</p>
</section>
<section id="missing-ivy-functions">
<h2>Missing Ivy Functions<a class="headerlink" href="#missing-ivy-functions" title="Permalink to this heading"></a></h2>
<p>Sometimes, there is a clear omission of an Ivy function, which would make the frontend
implementation much simpler. For example, at the time of writing,
implementing <code class="code docutils literal notranslate"><span class="pre">median</span></code> for the NumPy frontend would require a very manual and
heavily compositional implementation.
However, if the function <code class="code docutils literal notranslate"><span class="pre">ivy.median</span></code> was added to Ivy’s functional API, then this
frontend implementation would become very simple, with some light wrapping around
<code class="code docutils literal notranslate"><span class="pre">ivy.median</span></code>.</p>
<p>Adding <code class="code docutils literal notranslate"><span class="pre">ivy.median</span></code> would be a sensible decision, as many frameworks support this
function. When you come across such a function which is missing from Ivy, you should
create a new issue on the Ivy repo, with the title <code class="code docutils literal notranslate"><span class="pre">ivy.&lt;func_name&gt;</span></code> and with the
labels <code class="code docutils literal notranslate"><span class="pre">Suggestion</span></code>, <code class="code docutils literal notranslate"><span class="pre">Extension</span></code>, <code class="code docutils literal notranslate"><span class="pre">Ivy</span> <span class="pre">API</span></code> and <code class="code docutils literal notranslate"><span class="pre">Next</span> <span class="pre">Release</span></code>.
A member of our team will then review this issue, and if the proposed addition is deemed
to be timely and sensible, then we will add this function to the
“Extend Ivy Functional API”
<a class="reference external" href="https://github.com/unifyai/ivy/issues/3856">ToDo list issue</a>.
At this point in time, you can reserve the function for yourself and get it implemented
in a unique PR. Once merged, you can then resume working on the frontned function,
which will now be a much easier task with the new addition to Ivy.</p>
</section>
<section id="temporary-compositions">
<h2>Temporary Compositions<a class="headerlink" href="#temporary-compositions" title="Permalink to this heading"></a></h2>
<p>Alternatively, if after creating the new issue you would rather not wait around for a
member of our team to review and possibly add to the “Extend Ivy Functional API”
<a class="reference external" href="https://github.com/unifyai/ivy/issues/3856">ToDo list issue</a>,
you can instead go straight ahead add the frontend function as a heavy composition of
the existing Ivy functions, with a <code class="code docutils literal notranslate"><span class="pre">#ToDo</span></code> comment included, explaining that this
frontend implementation will be simplified if/when <code class="code docutils literal notranslate"><span class="pre">ivy.&lt;func_name&gt;</span></code> is add to
Ivy.</p>
<p>The entire workflow for extending the Ivy Frontends as an external contributor is
explained in more detail in the
<a class="reference external" href="https://lets-unify.ai/ivy/contributing/4_open_tasks.html#frontend-apis">Open Tasks</a>
section.</p>
</section>
<section id="supported-data-types-and-devices">
<h2>Supported Data Types and Devices<a class="headerlink" href="#supported-data-types-and-devices" title="Permalink to this heading"></a></h2>
<p>Sometimes, the corresponding function in the original framework might only support a
subset of data types. For example, <code class="code docutils literal notranslate"><span class="pre">tf.math.logical_and</span></code> only supports inputs of
type <code class="code docutils literal notranslate"><span class="pre">tf.bool</span></code>. However, Ivy’s
<a class="reference external" href="https://github.com/unifyai/ivy/blob/6089953297b438c58caa71c058ed1599f40a270c/ivy/functional/frontends/tensorflow/math.py#L84">implementation</a>
is as follows, with direct wrapping around <code class="code docutils literal notranslate"><span class="pre">ivy.logical_and</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">logical_and</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;LogicalAnd&quot;</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">logical_and</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="code docutils literal notranslate"><span class="pre">ivy.logical_and</span></code> supports all data types, and so
<code class="code docutils literal notranslate"><span class="pre">ivy.functional.frontends.tensorflow.math.logical_and</span></code> can also easily support all
data types. However, the primary purpose of these frontend functions is for code
transpilations, and in such cases it would never be useful to support extra data types
beyond <code class="code docutils literal notranslate"><span class="pre">tf.bool</span></code>, as the tensorflow code being transpiled would not support this.
Additionally, the unit tests for all frontend functions use the original framework
function as the ground truth, and so we can only test
<code class="code docutils literal notranslate"><span class="pre">ivy.functional.frontends.tensorflow.math.logical_and</span></code> with boolean inputs anyway.</p>
<p>For these reasons, all frontend functions which correspond to functions with limited
data type support in the native framework (in other words, which have even more
restrictions than the data type limitations of the framework itself) should be flagged
<a class="reference external" href="https://github.com/unifyai/ivy/blob/6089953297b438c58caa71c058ed1599f40a270c/ivy/functional/frontends/tensorflow/math.py#L88">as such</a>
in a manner like the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">logical_and</span><span class="o">.</span><span class="n">supported_dtypes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bool&quot;</span><span class="p">,)</span>
</pre></div>
</div>
<p>The same logic applies to unsupported devices. Even if the wrapped Ivy function supports
more devices, we should still flag the frontend function supported devices to be the
same as those supported by the function in the native framework. Again, this is only
needed if the limitations go beyond those of the framework itself. For example, it is
not necessary to uniquely flag every single NumPy function as supporting only CPU,
as this is a limitation of the entire framework, and this limitation is already
<a class="reference external" href="https://github.com/unifyai/ivy/blob/6eb2cadf04f06aace9118804100b0928dc71320c/ivy/functional/backends/numpy/__init__.py#L21">globally flagged</a>.</p>
</section>
<section id="classes-and-instance-methods">
<h2>Classes and Instance Methods<a class="headerlink" href="#classes-and-instance-methods" title="Permalink to this heading"></a></h2>
<p>Most frameworks include instance methods on their array class for common array
processing functions, such as <code class="code docutils literal notranslate"><span class="pre">reshape</span></code>, <code class="code docutils literal notranslate"><span class="pre">expand_dims</span></code> etc.
This simple design choice comes with many advantages,
some of which are explained in our <a class="reference internal" href="../design/ivy_as_a_framework/ivy_array.html#ivy-array"><span class="std std-ref">Ivy Array</span></a> section.</p>
<p>In order to implement Ivy’s frontend APIs to the extent that is required for arbitrary
code transpilations, it’s necessary for us to also implement these instance methods of
the framework-specific array classes (<code class="code docutils literal notranslate"><span class="pre">tf.Tensor</span></code>, <code class="code docutils literal notranslate"><span class="pre">torch.Tensor</span></code>,
<code class="code docutils literal notranslate"><span class="pre">numpy.ndarray</span></code>, <code class="code docutils literal notranslate"><span class="pre">jax.numpy.ndarray</span></code> etc).</p>
<p>For an example of how these are implemented, we first show the instance method for
<code class="code docutils literal notranslate"><span class="pre">np.ndarray.reshape</span></code>, which is implemented in the frontend
<a class="reference external" href="https://github.com/unifyai/ivy/blob/2e3ffc0f589791c7afc9d0384ce77fad4e0658ff/ivy/functional/frontends/numpy/ndarray/ndarray.py#L8">ndarray class</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ivy/functional/frontends/numpy/ndarray/ndarray.py</span>
<span class="k">def</span> <span class="nf">reshape</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">newshape</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">np_frontend</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">data</span><span class="p">,</span> <span class="n">newshape</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span>
</pre></div>
</div>
<p>Under the hood, this simply calls the frontend <code class="code docutils literal notranslate"><span class="pre">np_frontend.reshape</span></code> function,
which itself is implemented as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># ivy/functional/frontends/numpy/manipulation_routines/changing_array_shape.py</span>
<span class="k">def</span> <span class="nf">reshape</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">ivy</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">shape</span><span class="p">,</span> <span class="n">copy</span><span class="o">=</span><span class="n">copy</span><span class="p">)</span>
</pre></div>
</div>
<p>We need to create these frontend array classes and all of their instance methods such
that we are able to transpile code which makes use of instance methods.
As explained in <a class="reference internal" href="../design/ivy_as_a_transpiler.html#ivy-as-a-transpiler"><span class="std std-ref">Ivy as a Transpiler</span></a>, when transpiling code we first extract the
computation graph in the source framework. In the case of instance methods, we then
replace each of the original instance methods in the extracted computation graph with
these new instance methods defined in the Ivy frontend class.</p>
</section>
<section id="framework-specific-argument-types">
<h2>Framework-Specific Argument Types<a class="headerlink" href="#framework-specific-argument-types" title="Permalink to this heading"></a></h2>
<p>Some of the frontend functions that we need to implement include framework-specific
classes as the default values for some of the arguments,
which do not have a counterpart in other frameworks.
When re-implementing these functions in Ivy’s frontend, we would like to still include
those arguments without directly using these special classes, which do not exist in Ivy.</p>
<p>A good example is the special class <code class="code docutils literal notranslate"><span class="pre">numpy._NoValue</span></code>, which is sometimes used
instead of <code class="code docutils literal notranslate"><span class="pre">None</span></code> as the default value for arguments in numpy. For example,
the <code class="code docutils literal notranslate"><span class="pre">keepdims</span></code>, <code class="code docutils literal notranslate"><span class="pre">initial</span></code> and <code class="code docutils literal notranslate"><span class="pre">where</span></code> arguments of <code class="code docutils literal notranslate"><span class="pre">numpy.sum</span></code>
use <code class="code docutils literal notranslate"><span class="pre">numpy._NoValue</span></code> as the default value, while <code class="code docutils literal notranslate"><span class="pre">axis</span></code>, <code class="code docutils literal notranslate"><span class="pre">dtype</span></code> and
<code class="code docutils literal notranslate"><span class="pre">out</span></code> use <code class="code docutils literal notranslate"><span class="pre">None</span></code>, as can be seen in the
<a class="reference external" href="https://github.com/numpy/numpy/blob/v1.23.0/numpy/core/fromnumeric.py#L2162-L2299">source code</a>.</p>
<p>We now introduce how to deal with such framework-specific classes. For each backend
framework, there is a dictionary named <cite>&lt;backend&gt;_classes_to_ivy_classes</cite> in
<cite>ivy/ivy_tests/test_ivy/test_frontends/test_&lt;backend&gt;/__init__.py</cite>.
This holds pairs of framework-specific classes and the corresponding Ivy or
native Python classes to map to.
For example, in <cite>ivy/ivy_tests/test_ivy/test_frontends/test_numpy/__init__.py</cite>, we have:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">numpy_classes_to_ivy_classes</span> <span class="o">=</span> <span class="p">{</span><span class="n">np</span><span class="o">.</span><span class="n">_NoValue</span><span class="p">:</span> <span class="kc">None</span><span class="p">}</span>
</pre></div>
</div>
<p>Where <code class="code docutils literal notranslate"><span class="pre">np._NoValue</span></code> is a reference to the <code class="code docutils literal notranslate"><span class="pre">_NoValueType</span></code> class defined in
<code class="code docutils literal notranslate"><span class="pre">numpy/numpy/_globals.py</span></code>.</p>
<p>Any time a new framework-specific data type is discovered, such as the
<code class="code docutils literal notranslate"><span class="pre">numpy._NoValue</span></code> example given, then this should be added as a key to the
dictionary, and the most appropriate pure-python or Ivy class or instance should be
added as the value.</p>
<p>During frontend testing, the helper <code class="code docutils literal notranslate"><span class="pre">test_frontend_function</span></code> by default passes
all the generated inputs into both Ivy’s frontend implementation and also the original
function. For the framework-specific classes discussed, this is a problem.
Handling the framework-specific class in the Ivy frontend would add a dependency to the
frontend framework being mimicked. This breaks Ivy’s design philosophy,
whereby only the specific backend framework being used should be a dependency.
Our solution is to pass the value from the <code class="code docutils literal notranslate"><span class="pre">&lt;framework&gt;_classes_to_ivy_classes</span></code>
dict to the Ivy frontend function and the key from the
<code class="code docutils literal notranslate"><span class="pre">&lt;framework&gt;_classes_to_ivy_classes</span></code> dict to the original function during testing
in <code class="code docutils literal notranslate"><span class="pre">test_frontend_function</span></code>.</p>
<p>The way we do this is to wrap all framework-specific classes inside a
<code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code> during frontend testing. The <code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code> is defined in
<code class="code docutils literal notranslate"><span class="pre">ivy/ivy_tests/test_ivy/test_frontends/__init__.py</span></code>, and this acts as a
placeholder class to represent the framework-specific class and its counterpart.
It has only one attribute, <code class="code docutils literal notranslate"><span class="pre">_native_class</span></code>, which holds the reference to the
special class being used by the targeted framework.
Then, in order to pass the key and value to the orignal and frontend functions
respectively, <code class="code docutils literal notranslate"><span class="pre">test_frontend_function</span></code> detects all <code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code> instances
in the arguments, makes use of <code class="code docutils literal notranslate"><span class="pre">&lt;framework&gt;_classes_to_ivy_classes</span></code> internally
to find the corresponding value to the key wrapped inside the <code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code>
instance, and then passes the key and value as inputs to the corresponding functions
correctly.</p>
<p>As an example, we show how <code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code> is used in the frontend test for the
<code class="code docutils literal notranslate"><span class="pre">sum</span></code> function in the NumPy frontend:</p>
<p>The function has three optional arguments which have the default value of
<code class="code docutils literal notranslate"><span class="pre">numpy._NoValue</span></code>, being: <code class="code docutils literal notranslate"><span class="pre">where</span></code>, <code class="code docutils literal notranslate"><span class="pre">keep_dims</span></code> and <code class="code docutils literal notranslate"><span class="pre">initial</span></code>.
We therefore define a <code class="code docutils literal notranslate"><span class="pre">NativeClass</span></code> object <code class="code docutils literal notranslate"><span class="pre">Novalue</span></code>, and pass this as input
to each of these arguments when calling <code class="code docutils literal notranslate"><span class="pre">test_frontend_function</span></code>.</p>
<p><strong>Round Up</strong></p>
<p>This should hopefully have given you a better grasp on the what the Ivy Frontend APIs
are for, how they should be implemented, and the things to watch out for!
We also have a short <a class="reference external" href="https://www.youtube.com/watch?v=72kBVJTpzIw&amp;list=PLwNuX3xB_tv-wTpVDMSJr7XW6IP_qZH0t">YouTube tutorial series</a> on this
as well if you prefer a video explanation!</p>
<p>If you’re ever unsure of how best to proceed,
please feel free to engage with the <a class="reference external" href="https://github.com/unifyai/ivy/discussions/2051">ivy frontends discussion</a>,
or reach out on <a class="reference external" href="https://discord.gg/ZVQdvbzNQJ">discord</a> in the <a class="reference external" href="https://discord.com/channels/799879767196958751/998782045494976522">ivy frontends channel</a>!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="15_ivy_tests.html" class="btn btn-neutral float-left" title="Ivy Tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="17_ivy_frontends_tests.html" class="btn btn-neutral float-right" title="Ivy Frontend Tests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-2022, Ivy Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>